<script src="https://cdn.jsdelivr.net/npm/chart.js@3"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@2/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
<div>
    <canvas id="myChart"></canvas>
</div>
<script>
    // Eventually this will pull from https://github.com/decompals/frogress
    const datamap = [{
        "date": "2022-03-28T21:10:24.000Z",
        "code": 0.015032,
        "data": 0
    }, {"date": "2022-03-29T18:08:54.000Z", "code": 0.015032, "data": 0}, {
        "date": "2022-03-29T22:47:41.000Z",
        "code": 0.015032,
        "data": 0
    }, {"date": "2022-03-29T23:12:36.000Z", "code": 0.015032, "data": 0}, {
        "date": "2022-04-02T09:50:35.000Z",
        "code": 0.015032,
        "data": 0
    }, {"date": "2022-04-02T21:03:04.000Z", "code": 0.015032, "data": 0}, {
        "date": "2022-04-02T22:25:50.000Z",
        "code": 0.015032,
        "data": 0
    }, {"date": "2022-04-03T05:54:57.000Z", "code": 0.015032, "data": 0}, {
        "date": "2022-04-04T10:20:15.000Z",
        "code": 0.01715,
        "data": 0
    }, {"date": "2022-04-04T14:22:31.000Z", "code": 0.01715, "data": 0}, {
        "date": "2022-04-04T14:51:16.000Z",
        "code": 0.023405,
        "data": 0
    }, {"date": "2022-04-05T23:22:28.000Z", "code": 0.023405, "data": 0}, {
        "date": "2022-04-06T08:17:53.000Z",
        "code": 0.023405,
        "data": 0
    }, {"date": "2022-04-06T10:04:03.000Z", "code": 0.023405, "data": 0}, {
        "date": "2022-04-06T10:44:04.000Z",
        "code": 0.023405,
        "data": 0.334073
    }, {"date": "2022-04-06T17:12:30.000Z", "code": 0.023405, "data": 0.334073}, {
        "date": "2022-04-06T17:45:05.000Z",
        "code": 0.023405,
        "data": 0.334073
    }, {"date": "2022-04-07T08:53:55.000Z", "code": 0.023405, "data": 0.334073}, {
        "date": "2022-04-08T05:17:01.000Z",
        "code": 0.023405,
        "data": 0.334073
    }, {"date": "2022-04-08T06:25:41.000Z", "code": 0.023405, "data": 0.334073}, {
        "date": "2022-04-08T06:41:39.000Z",
        "code": 0.023405,
        "data": 0.334073
    }, {"date": "2022-04-08T06:42:36.000Z", "code": 0.023405, "data": 0.334073}, {
        "date": "2022-04-08T08:30:31.000Z",
        "code": 0.031778,
        "data": 0.334073
    }, {"date": "2022-04-08T10:22:19.000Z", "code": 0.031778, "data": 0.334073}, {
        "date": "2022-04-08T21:26:47.000Z",
        "code": 0.031778,
        "data": 0.334073
    }, {"date": "2022-04-08T21:29:48.000Z", "code": 0.031778, "data": 0.334073}, {
        "date": "2022-04-08T21:40:25.000Z",
        "code": 0.031778,
        "data": 0.334073
    }, {"date": "2022-04-08T21:47:12.000Z", "code": 0.031778, "data": 0.334073}, {
        "date": "2022-04-08T21:49:05.000Z",
        "code": 0.031778,
        "data": 0.334073
    }, {"date": "2022-04-08T21:51:05.000Z", "code": 0.031778, "data": 0.334073}, {
        "date": "2022-04-08T21:59:59.000Z",
        "code": 0.031778,
        "data": 0.334073
    }, {"date": "2022-04-09T06:40:18.000Z", "code": 0.031778, "data": 0.334073}, {
        "date": "2022-04-09T08:51:35.000Z",
        "code": 0.031778,
        "data": 0.43128
    }, {"date": "2022-04-10T00:17:13.000Z", "code": 0.031778, "data": 0.43128}, {
        "date": "2022-04-12T04:53:51.000Z",
        "code": 0.032384,
        "data": 0.43128
    }, {"date": "2022-04-12T04:56:27.000Z", "code": 0.032384, "data": 0.43128}, {
        "date": "2022-04-12T05:20:49.000Z",
        "code": 0.032384,
        "data": 0.43128
    }, {"date": "2022-04-12T05:41:21.000Z", "code": 0.032384, "data": 0.43128}, {
        "date": "2022-04-12T07:10:32.000Z",
        "code": 0.032384,
        "data": 0.43128
    }, {"date": "2022-04-12T08:55:54.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-12T09:14:24.000Z",
        "code": 0.032787,
        "data": 0.43128
    }, {"date": "2022-04-12T09:57:12.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-13T03:55:49.000Z",
        "code": 0.032787,
        "data": 0.43128
    }, {"date": "2022-04-13T04:30:20.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-13T04:45:24.000Z",
        "code": 0.032787,
        "data": 0.43128
    }, {"date": "2022-04-13T06:53:45.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-13T08:02:06.000Z",
        "code": 0.032787,
        "data": 0.43128
    }, {"date": "2022-04-14T04:22:21.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-14T08:02:42.000Z",
        "code": 0.032787,
        "data": 0.43128
    }, {"date": "2022-04-15T07:32:53.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-15T19:24:52.000Z",
        "code": 0.032787,
        "data": 0.43128
    }, {"date": "2022-04-16T03:52:00.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-16T04:01:44.000Z",
        "code": 0.032787,
        "data": 0.43128
    }, {"date": "2022-04-16T07:50:32.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-16T22:11:02.000Z",
        "code": 0.032787,
        "data": 0.43128
    }, {"date": "2022-04-16T23:18:42.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-17T00:22:49.000Z",
        "code": 0.032787,
        "data": 0.43128
    }, {"date": "2022-04-18T04:35:01.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-21T06:32:43.000Z",
        "code": 0.032787,
        "data": 0.43128
    }, {"date": "2022-04-23T07:19:32.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-24T01:54:45.000Z",
        "code": 0.032787,
        "data": 0.43128
    }, {"date": "2022-04-24T17:42:45.000Z", "code": 0.032787, "data": 0.43128}, {
        "date": "2022-04-24T17:44:07.000Z",
        "code": 0.049433,
        "data": 0.437733
    }, {"date": "2022-04-24T19:23:30.000Z", "code": 0.049433, "data": 0.437733}, {
        "date": "2022-04-27T19:30:54.000Z",
        "code": 0.049433,
        "data": 0.437733
    }, {"date": "2022-04-28T02:34:14.000Z", "code": 0.049433, "data": 0.437733}, {
        "date": "2022-04-30T08:32:00.000Z",
        "code": 0.049433,
        "data": 0.437733
    }, {"date": "2022-04-30T08:36:02.000Z", "code": 0.049433, "data": 0.437733}, {
        "date": "2022-07-02T05:30:11.000Z",
        "code": 0.049433,
        "data": 0.437733
    }, {"date": "2022-07-02T05:34:01.000Z", "code": 0.049433, "data": 0.437733}, {
        "date": "2022-07-14T05:36:41.000Z",
        "code": 0.049433,
        "data": 0.437733
    }, {"date": "2022-07-14T05:48:03.000Z", "code": 0.049433, "data": 0.437733}, {
        "date": "2022-07-14T05:50:03.000Z",
        "code": 0.049433,
        "data": 0.437733
    }, {"date": "2022-07-14T16:24:26.000Z", "code": 0.049433, "data": 0.437733}, {
        "date": "2022-07-15T00:48:18.000Z",
        "code": 0.049433,
        "data": 0.437733
    }, {"date": "2022-07-18T05:20:04.000Z", "code": 0.049433, "data": 0.437733}, {
        "date": "2022-07-18T05:21:27.000Z",
        "code": 0.049433,
        "data": 0.437733
    }, {"date": "2022-07-18T05:37:40.000Z", "code": 0.056293, "data": 0.438338}, {
        "date": "2022-07-18T05:39:25.000Z",
        "code": 0.056293,
        "data": 0.438338
    }, {"date": "2022-07-18T13:51:34.000Z", "code": 0.082422, "data": 0.4397}, {
        "date": "2022-07-18T17:53:58.000Z",
        "code": 0.118639,
        "data": 0.441817
    }, {"date": "2022-07-18T22:42:58.000Z", "code": 0.118639, "data": 0.441817}, {
        "date": "2022-07-18T23:38:32.000Z",
        "code": 0.118639,
        "data": 0.441817
    }, {"date": "2022-07-18T23:52:28.000Z", "code": 0.118639, "data": 0.441817}, {
        "date": "2022-07-19T00:10:10.000Z",
        "code": 0.118639,
        "data": 0.441817
    }, {"date": "2022-07-19T00:23:07.000Z", "code": 0.118639, "data": 0.441817}, {
        "date": "2022-07-19T00:30:39.000Z",
        "code": 0.118639,
        "data": 0.441817
    }, {"date": "2022-07-20T06:19:07.000Z", "code": 0.12217, "data": 0.442624}, {
        "date": "2022-07-20T06:20:28.000Z",
        "code": 0.12217,
        "data": 0.442624
    }, {"date": "2022-07-21T04:47:03.000Z", "code": 0.12782, "data": 0.445851}, {
        "date": "2022-07-21T19:19:32.000Z",
        "code": 0.12782,
        "data": 0.445851
    }, {"date": "2022-07-26T04:36:32.000Z", "code": 0.12782, "data": 0.445851}, {
        "date": "2022-07-27T05:11:36.000Z",
        "code": 0.140733,
        "data": 0.549309
    }, {"date": "2022-07-27T05:54:00.000Z", "code": 0.150922, "data": 0.549309}, {
        "date": "2022-07-27T05:56:22.000Z",
        "code": 0.150922,
        "data": 0.549309
    }, {"date": "2022-07-27T06:32:31.000Z", "code": 0.155764, "data": 0.549309}, {
        "date": "2022-07-27T06:33:44.000Z",
        "code": 0.155764,
        "data": 0.549309
    }, {"date": "2022-07-28T13:19:26.000Z", "code": 0.155764, "data": 0.549309}, {
        "date": "2022-07-28T14:00:20.000Z",
        "code": 0.179472,
        "data": 0.549309
    }, {"date": "2022-07-28T14:24:49.000Z", "code": 0.179472, "data": 0.549309}, {
        "date": "2022-07-28T15:50:05.000Z",
        "code": 0.184214,
        "data": 0.549309
    }, {"date": "2022-07-29T05:03:24.000Z", "code": 0.19632, "data": 0.549309}, {
        "date": "2022-07-30T09:12:25.000Z",
        "code": 0.198337,
        "data": 0.549309
    }, {"date": "2022-07-30T10:34:28.000Z", "code": 0.211351, "data": 0.550318}, {
        "date": "2022-07-30T12:33:31.000Z",
        "code": 0.216597,
        "data": 0.601946
    }, {"date": "2022-07-30T20:10:04.000Z", "code": 0.218918, "data": 0.601946}, {
        "date": "2022-07-31T00:38:13.000Z",
        "code": 0.218918,
        "data": 0.601946
    }, {"date": "2022-08-05T10:23:49.000Z", "code": 0.218918, "data": 0.601946}, {
        "date": "2022-08-05T19:43:46.000Z",
        "code": 0.218918,
        "data": 0.601946
    }, {"date": "2022-08-05T19:46:33.000Z", "code": 0.218918, "data": 0.601946}, {
        "date": "2022-08-09T23:07:49.000Z",
        "code": 0.218918,
        "data": 0.601946
    }, {"date": "2022-08-10T03:00:57.000Z", "code": 0.547597, "data": 0.890693}, {
        "date": "2022-08-10T06:27:47.000Z",
        "code": 0.547597,
        "data": 0.890693
    }, {"date": "2022-08-10T23:08:58.000Z", "code": 0.547597, "data": 0.890693}, {
        "date": "2022-08-10T23:10:26.000Z",
        "code": 0.547597,
        "data": 0.890693
    }, {"date": "2022-08-10T23:11:22.000Z", "code": 0.547597, "data": 0.890693}, {
        "date": "2022-08-11T01:17:58.000Z",
        "code": 0.547597,
        "data": 0.890693
    }, {"date": "2022-08-11T02:27:22.000Z", "code": 0.547597, "data": 0.890693}, {
        "date": "2022-08-11T02:33:46.000Z",
        "code": 0.547597,
        "data": 0.890693
    }, {"date": "2022-08-11T08:12:35.000Z", "code": 0.547597, "data": 0.890693}, {
        "date": "2022-08-11T09:24:45.000Z",
        "code": 0.547597,
        "data": 0.890693
    }, {"date": "2022-08-11T18:20:15.000Z", "code": 0.551632, "data": 0.892508}, {
        "date": "2022-08-11T18:35:12.000Z",
        "code": 0.551632,
        "data": 0.892508
    }, {"date": "2022-08-11T18:50:15.000Z", "code": 0.551632, "data": 0.892508}, {
        "date": "2022-08-12T09:18:28.000Z",
        "code": 0.55708,
        "data": 0.89513
    }, {"date": "2022-08-13T01:26:54.000Z", "code": 0.574028, "data": 0.897701}, {
        "date": "2022-08-13T01:29:02.000Z",
        "code": 0.574028,
        "data": 0.897701
    }, {"date": "2022-08-13T02:48:34.000Z", "code": 0.574028, "data": 0.897701}, {
        "date": "2022-08-13T04:32:42.000Z",
        "code": 0.574028,
        "data": 0.897701
    }, {"date": "2022-08-13T12:57:38.000Z", "code": 0.55708, "data": 0.89513}, {
        "date": "2022-08-13T12:59:49.000Z",
        "code": 0.574028,
        "data": 0.897701
    }, {"date": "2022-08-13T21:43:45.000Z", "code": 0.60278, "data": 0.899314}, {
        "date": "2022-08-13T21:44:29.000Z",
        "code": 0.60278,
        "data": 0.899314
    }, {"date": "2022-08-14T18:38:41.000Z", "code": 0.60278, "data": 0.899314}, {
        "date": "2022-08-14T18:42:30.000Z",
        "code": 0.60278,
        "data": 0.899314
    }, {"date": "2022-08-15T04:51:06.000Z", "code": 0.60278, "data": 0.899314}, {
        "date": "2022-08-15T05:50:25.000Z",
        "code": 0.60278,
        "data": 0.899314
    }, {"date": "2022-08-16T02:14:28.000Z", "code": 0.60278, "data": 0.899314}, {
        "date": "2022-08-16T21:46:30.000Z",
        "code": 0.60278,
        "data": 0.899314
    }, {"date": "2022-08-16T21:47:16.000Z", "code": 1.683548, "data": 1.541847}, {
        "date": "2022-08-16T21:47:39.000Z",
        "code": 1.683548,
        "data": 1.541847
    }, {"date": "2022-08-21T01:40:40.000Z", "code": 1.683548, "data": 1.541847}, {
        "date": "2022-08-21T05:23:57.000Z",
        "code": 1.683548,
        "data": 1.541847
    }, {"date": "2022-08-22T14:16:37.000Z", "code": 1.683548, "data": 1.541847}, {
        "date": "2022-08-22T14:18:31.000Z",
        "code": 1.683548,
        "data": 1.541847
    }, {"date": "2022-08-22T14:21:58.000Z", "code": 1.683548, "data": 1.541847}, {
        "date": "2022-08-23T03:54:30.000Z",
        "code": 1.683548,
        "data": 1.541847
    }, {"date": "2022-08-26T03:46:24.000Z", "code": 1.918708, "data": 1.667742}, {
        "date": "2022-08-30T04:05:16.000Z",
        "code": 1.918708,
        "data": 1.667742
    }, {"date": "2022-08-30T05:12:32.000Z", "code": 1.918708, "data": 1.667742}, {
        "date": "2022-08-30T22:48:44.000Z",
        "code": 1.918708,
        "data": 1.667742
    }, {"date": "2022-08-31T04:54:17.000Z", "code": 1.918708, "data": 1.667742}, {
        "date": "2022-08-31T16:06:56.000Z",
        "code": 2.040878,
        "data": 1.682868
    }, {"date": "2022-09-01T00:22:20.000Z", "code": 2.040878, "data": 1.682868}, {
        "date": "2022-09-04T09:30:03.000Z",
        "code": 2.048142,
        "data": 1.735303
    }, {"date": "2022-09-05T04:01:22.000Z", "code": 2.048142, "data": 1.735303}, {
        "date": "2022-09-08T04:51:31.000Z",
        "code": 2.051874,
        "data": 1.735303
    }, {"date": "2022-09-08T05:01:54.000Z", "code": 2.051874, "data": 1.735303}, {
        "date": "2022-09-10T20:32:26.000Z",
        "code": 2.170514,
        "data": 1.753252
    }, {"date": "2022-09-10T21:31:25.000Z", "code": 2.186655, "data": 1.753252}, {
        "date": "2022-09-10T21:32:57.000Z",
        "code": 2.186655,
        "data": 1.753252
    }, {"date": "2022-09-10T22:41:14.000Z", "code": 2.186655, "data": 1.753252}, {
        "date": "2022-09-10T22:41:46.000Z",
        "code": 2.212582,
        "data": 1.753252
    }, {"date": "2022-09-11T00:25:05.000Z", "code": 2.228017, "data": 1.753252}, {
        "date": "2022-09-11T03:18:17.000Z",
        "code": 2.255962,
        "data": 1.753252
    }, {"date": "2022-09-11T04:54:54.000Z", "code": 2.509584, "data": 1.75658}, {
        "date": "2022-09-11T05:54:54.000Z",
        "code": 2.520681,
        "data": 1.75658
    }, {"date": "2022-09-11T18:45:19.000Z", "code": 2.525019, "data": 1.759353}, {
        "date": "2022-09-12T01:07:45.000Z",
        "code": 2.525019,
        "data": 1.759353
    }, {"date": "2022-09-13T04:28:02.000Z", "code": 2.525019, "data": 1.759353}, {
        "date": "2022-09-13T04:55:03.000Z",
        "code": 2.525019,
        "data": 1.759353
    }, {"date": "2022-09-14T02:25:14.000Z", "code": 2.525019, "data": 1.759353}, {
        "date": "2022-09-14T02:25:14.000Z",
        "code": 2.528853,
        "data": 1.764999
    }, {"date": "2022-09-14T05:24:12.000Z", "code": 2.528853, "data": 1.764999}, {
        "date": "2022-09-14T05:24:37.000Z",
        "code": 2.528853,
        "data": 1.764999
    }, {"date": "2022-09-14T05:25:20.000Z", "code": 2.58333, "data": 1.770546}, {
        "date": "2022-09-14T05:53:26.000Z",
        "code": 2.588778,
        "data": 1.770747
    }, {"date": "2022-09-15T04:08:57.000Z", "code": 2.588778, "data": 1.770747}, {
        "date": "2022-09-16T01:18:29.000Z",
        "code": 2.588778,
        "data": 1.770747
    }, {"date": "2022-09-16T01:58:34.000Z", "code": 2.650014, "data": 1.778713}, {
        "date": "2022-09-16T02:22:52.000Z",
        "code": 2.650014,
        "data": 1.7771
    }, {"date": "2022-09-16T03:24:27.000Z", "code": 2.65072, "data": 1.777302}, {
        "date": "2022-09-16T03:38:03.000Z",
        "code": 2.670594,
        "data": 1.777302
    }, {"date": "2022-09-16T04:30:20.000Z", "code": 2.670594, "data": 1.777302}, {
        "date": "2022-09-18T05:52:19.000Z",
        "code": 2.670594,
        "data": 1.777302
    }, {"date": "2022-09-18T05:55:13.000Z", "code": 2.670594, "data": 1.777302}, {
        "date": "2022-09-18T06:05:46.000Z",
        "code": 2.670594,
        "data": 1.777302
    }, {"date": "2022-09-18T06:16:53.000Z", "code": 2.670594, "data": 1.777302}, {
        "date": "2022-09-18T17:51:07.000Z",
        "code": 2.670594,
        "data": 1.777302
    }, {"date": "2022-09-19T04:19:46.000Z", "code": 2.670594, "data": 1.777302}, {
        "date": "2022-09-20T04:35:24.000Z",
        "code": 2.675134,
        "data": 1.777302
    }, {"date": "2022-09-21T05:18:20.000Z", "code": 2.675134, "data": 1.777302}, {
        "date": "2022-09-21T05:40:03.000Z",
        "code": 2.675134,
        "data": 1.777302
    }, {"date": "2022-09-21T05:47:00.000Z", "code": 2.675134, "data": 1.777302}, {
        "date": "2022-09-22T06:03:09.000Z",
        "code": 2.681187,
        "data": 1.77831
    }, {"date": "2022-09-22T06:03:38.000Z", "code": 2.681187, "data": 1.77831}, {
        "date": "2022-09-22T17:51:13.000Z",
        "code": 2.681187,
        "data": 1.77831
    }, {"date": "2022-09-29T05:31:19.000Z", "code": 2.681187, "data": 1.77831}, {
        "date": "2022-09-29T23:09:11.000Z",
        "code": 2.681187,
        "data": 1.77831
    }, {"date": "2022-09-29T23:55:43.000Z", "code": 2.681187, "data": 1.77831}, {
        "date": "2022-09-30T00:24:12.000Z",
        "code": 2.681187,
        "data": 1.77831
    }, {"date": "2022-09-30T04:24:13.000Z", "code": 2.681187, "data": 1.77831}, {
        "date": "2022-09-30T12:46:54.000Z",
        "code": 2.681187,
        "data": 1.77831
    }, {"date": "2022-09-30T12:52:25.000Z", "code": 2.681187, "data": 1.77831}, {
        "date": "2022-09-30T14:17:07.000Z",
        "code": 2.681187,
        "data": 1.77831
    }, {"date": "2022-09-30T21:25:39.000Z", "code": 2.681187, "data": 1.77831}, {
        "date": "2022-09-30T21:51:20.000Z",
        "code": 2.681187,
        "data": 1.77831
    }, {"date": "2022-10-01T06:19:15.000Z", "code": 2.681187, "data": 1.77831}, {
        "date": "2022-10-01T08:33:18.000Z",
        "code": 2.681187,
        "data": 1.77831
    }, {"date": "2022-10-01T14:08:15.000Z", "code": 2.681187, "data": 1.77831}];

    const data = {
        labels: datamap.map(a => a.date),
        datasets: [{
            label: 'Code',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: datamap.map(a => a.code),
        }, {
            label: 'Data',
            backgroundColor: 'rgb(50, 168, 82)',
            borderColor: 'rgb(50, 168, 82)',
            data: datamap.map(a => a.data),
        }]
    };

    const config = {
        type: 'line',
        data: data,
        options: {
            interaction: {
                intersect: false,
                mode: 'index',
            },
            plugins: {
                title: {
                    text: 'Progress',
                    display: true
                },
                tooltip: {
                    callbacks: {
                        label: (ctx) => {
                            return `${ctx.dataset.label}: ${ctx.parsed.y.toFixed(2)}%`;
                        },
                        footer: (items) => {
                            let sum = items.reduce((sum, item) => sum + item.parsed.y, 0);
                            return `Combined: ${(sum / items.length).toFixed(2)}%`;
                        },
                    }
                },
            },
            scales: {
                x: {
                    type: 'time',
                    time: {
                        tooltipFormat: 'MMMM dd, yyyy'
                    },
                    title: {
                        display: true,
                        text: 'Date'
                    }
                },
                y: {
                    beginAtZero: true,
                    ticks: {
                        callback: function (value, index, ticks) {
                            return value.toFixed(0) + '%';
                        },
                        stepSize: 1,
                    },
                    title: {
                        display: true,
                        text: 'Completion',
                    }
                }
            },
        },
    };

    const myChart = new Chart(
        document.getElementById('myChart'),
        config,
    );
</script>